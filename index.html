<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>FURUYUME</title>

  <!-- Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fff;
      --text:#0a0a0a;
      --muted:#6b6b6b;
      --hair:#e9e9e9;
      --glass: rgba(255,255,255,.58);
      --glass2: rgba(255,255,255,.36);
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
      --ls: -0.05em;
      --ls-soft: -0.05em;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      letter-spacing: var(--ls);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: geometricPrecision;
      overflow-x:hidden;
    }

    a{ color:inherit; text-decoration:none; }
    button{ font:inherit; letter-spacing: inherit; background:none; border:0; padding:0; color:inherit; }

    /* Safe areas for Telegram iOS */
    .safe{
      padding-left: max(16px, env(safe-area-inset-left));
      padding-right: max(16px, env(safe-area-inset-right));
    }
    /* Убрали лишний верхний воздух: только safe-area + 2px */
    .top-safe{ padding-top: calc(env(safe-area-inset-top) + 2px); }
    .bottom-safe{ padding-bottom: max(16px, env(safe-area-inset-bottom)); }

    /* Loading */
    .loader-screen{
      position:fixed; inset:0;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      z-index:9999;
      transition: opacity .28s ease, transform .28s ease;
    }
    .loader-screen.hide{
      opacity:0;
      transform: scale(.99);
      pointer-events:none;
    }
    .spinner{
      width:44px; height:44px;
      border-radius:999px;
      border:3px solid #e8e8e8;
      border-top-color:#111;
      animation: spin .85s linear infinite;
      margin-bottom:14px;
    }
    @keyframes spin{ to{ transform: rotate(360deg);} }
    .loader-title{
      font-weight:600;
      font-size:14px;
      letter-spacing: var(--ls);
      text-transform: uppercase;
    }
    .loader-sub{
      margin-top:8px;
      max-width: 280px;
      text-align:center;
      font-size:12px;
      color:var(--muted);
      letter-spacing: calc(var(--ls) + 0.02em);
      line-height: 1.35;
    }
    .loader-hint{
      margin-top:16px;
      font-size:12px;
      color: #8a8a8a;
      letter-spacing: calc(var(--ls) + 0.03em);
      opacity:0;
      transform: translateY(2px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .loader-hint.show{ opacity:1; transform: translateY(0); }

    /* Layout */
    .app{
      min-height:100%;
      display:flex;
      flex-direction:column;
    }

    /* ВАЖНО: это и было “много пустого места сверху”.
       Ставим 0, а observer и так работает по mainHeader. */
    .header-space{ height: 0px; }

    .topbar{
      position:relative;
      padding-top: 2px;
      padding-bottom: 6px;
    }

    .topbar-inner{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      align-items:center;
    }

    .topbar-left, .topbar-right{
      display:flex;
      align-items:center;
      font-weight:400;
      font-size:12px;
      text-transform: uppercase;
      letter-spacing: var(--ls);
      white-space:nowrap;
    }

    /* ✅ ФИКС 1: СИММЕТРИЯ
       Левый блок прижимаем к центру (к логотипу), правый тоже к центру. */
    .topbar-left{
      justify-content:flex-end;  /* было flex-start */
      gap:18px;
      padding-right: 10px;       /* симметричный “воздух” от логотипа */
    }
    .topbar-right{
      justify-content:flex-start;/* было flex-end */
      gap:18px;
      padding-left: 10px;        /* симметричный “воздух” от логотипа */
    }

    .nav-item{
      opacity: .92;
      transition: opacity .18s ease, transform .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .nav-item:active{ opacity: .65; transform: scale(.98); }

    /* Logo */
    .brand{
      display:flex;
      align-items:center;
      justify-content:center;
      width:56px; height:56px;
      margin:0 auto;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .brand img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }

    /* Floating glass header */
    .floatbar{
      position:fixed;
      left:0; right:0;
      top: calc(env(safe-area-inset-top) + 2px); /* ✅ ФИКС 4: меньше сверху */
      z-index: 2000;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }

    /* ✅ ФИКС 3: анимацию делаем на card, чтобы плашка+текст ехали вместе */
    .floatbar-card{
      pointer-events:auto;
      width: min(420px, calc(100% - 28px));
      border-radius: 999px;

      background: linear-gradient(180deg, var(--glass), var(--glass2));
      /* Фоллбек чтобы не было эффекта “текст без плашки” */
      background-color: rgba(255,255,255,.72);

      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);

      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,.06);

      padding: 10px 14px;

      opacity:0;
      transform: translateY(-10px);
      transition: opacity .22s ease, transform .22s ease;
      will-change: opacity, transform;
      contain: paint;
    }
    .floatbar.show .floatbar-card{
      opacity:1;
      transform: translateY(0);
    }

    .floatbar-inner{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      align-items:center;
    }
    .floatbar .topbar-left,
    .floatbar .topbar-right{
      font-size:12px;
      gap:14px;
    }

    /* ✅ ФИКС 1 (float): симметрия такая же */
    .floatbar .topbar-left{
      justify-content:flex-end;
      padding-right: 10px;
    }
    .floatbar .topbar-right{
      justify-content:flex-start;
      padding-left: 10px;
    }

    .floatbrand{
      width:34px; height:34px;
      display:flex;
      align-items:center;
      justify-content:center;
      -webkit-tap-highlight-color: transparent;
    }
    .floatbrand img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }

    /* Categories (STATIC) */
    .categories{
      padding-top: 10px;
      padding-bottom: 18px;
    }
    .cat-wrap{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap: 10px 18px;
      padding-top: 6px;
    }
    .cat{
      font-weight:600;
      font-size:10px;
      text-transform: uppercase;
      opacity:.9;
      cursor:pointer;
      padding: 7px 12px;
      border-radius: 10px;
      transition: opacity .18s ease, transform .18s ease, background .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .cat:active{ transform: scale(.98); opacity:.7; }
    .cat.active{
      opacity: 1;
      background: rgba(0,0,0,.04);
    }

    /* Products grid */
    .content{
      flex:1;
      padding-bottom: 22px;
    }
    .products{
      width: min(520px, 100%);
      margin: 0 auto;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px 18px;
      align-items:start;
      padding-top: 4px;
      transition: opacity .18s ease, transform .18s ease;
    }
    .grid.fade-out{
      opacity:0;
      transform: translateY(4px);
    }

    .card{
      text-align:center;
      user-select:none;
    }

    /* No background for product */
    .img{
      width:100%;
      aspect-ratio: 1/1;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:visible;
      background: transparent;
      border: none;
      border-radius: 0;
    }

    .product-photo{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display:block;
      -webkit-user-drag: none;
      user-select:none;
      pointer-events:none;
      transform: translateZ(0);
    }

    /* ✅ ФИКС 2: одинаковая высота под название */
    .name{
      margin-top: 14px;
      font-weight:650;
      font-size:14px;
      text-transform: uppercase;
      letter-spacing: var(--ls);

      line-height: 1.1;
      min-height: calc(2 * 1.1em);   /* всегда “две строки места” */
      display: -webkit-box;
      -webkit-line-clamp: 2;         /* максимум 2 строки */
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .desc{
      margin-top: 6px;
      font-weight:600;
      font-size:12px;
      text-transform: uppercase;
      color:#111;
      opacity:.85;
      letter-spacing: calc(var(--ls) + 0.02em);
    }
    .price-row{
      margin-top: 10px;
      display:flex;
      align-items:baseline;
      justify-content:center;
      gap: 8px;
      font-size:14px;
      font-weight:700;
      letter-spacing: calc(var(--ls) + 0.02em);
      text-transform: uppercase;
    }
    .old{
      font-weight:600;
      color: #8b8b8b;
      text-decoration: line-through;
      font-size: 12px;
      letter-spacing: calc(var(--ls) + 0.03em);
    }

    .dolyami{
      margin-top: 10px;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.06);
      color:#111;
      font-weight:700;
      font-size:12px;
      letter-spacing: var(--ls-soft);
      text-transform: none;
    }
    .dolyami-icon{
      width:18px;
      height:18px;
      display:block;
      object-fit:contain;
      flex:0 0 auto;
    }

    /* Footer */
    .footer{
      padding-top: 26px;
      padding-bottom: 34px;
    }

    /* ✅ ФИКС 5: ровные расстояния */
    .footer-links,
    .footer-legal{
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap: 12px 18px;          /* одинаково для обоих блоков */
      font-weight:600;
      font-size:9px;
      text-transform: uppercase;
      letter-spacing: calc(var(--ls) + 0.03em);
      line-height: 1.2;
    }
    .footer-links{
      opacity: .92;
      margin-bottom: 12px;     /* одинаковый “воздух” между группами */
    }
    .footer-legal{
      opacity: .85;
      margin-top: 0;
    }

    .footer a{
      transition: opacity .18s ease, transform .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .footer a:active{ opacity:.65; transform: scale(.99); }

    /* Small devices polish */
    @media (max-width: 360px){
      .topbar-left,.topbar-right{ gap: 14px; font-size: 11px; }
      .cat{ font-size: 10px; }
      .grid{ gap: 26px 14px; }
      .name{ font-size: 13px; min-height: calc(2 * 1.1em); }
    }
  </style>
</head>

<body>
  <!-- LOADER -->
  <div id="loader" class="loader-screen safe top-safe bottom-safe" aria-live="polite">
    <div class="spinner" aria-hidden="true"></div>
    <div class="loader-title">Загрузка</div>
    <div class="loader-sub">Прогружаем всё нужное. Если загрузка идёт слишком долго — перезагрузите приложение.</div>
    <div id="loaderHint" class="loader-hint">Совет: иногда помогает закрыть и открыть Telegram заново.</div>
  </div>

  <!-- FLOATING GLASS HEADER -->
  <div id="floatbar" class="floatbar safe" aria-hidden="true">
    <div class="floatbar-card">
      <div class="floatbar-inner">
        <div class="topbar-left">
          <span class="nav-item">поиск</span>
          <a class="nav-item" href="https://t.me/furuyumemngrs" target="_blank" rel="noopener">поддержка</a>
        </div>

        <button class="floatbrand" id="floatLogoBtn" aria-label="FURUYUME — наверх">
          <img src="logo.png" alt="FURUYUME">
        </button>

        <div class="topbar-right">
          <span class="nav-item">отзывы</span>
          <span class="nav-item">корзина</span>
        </div>
      </div>
    </div>
  </div>

  <div class="app">
    <div class="header-space" aria-hidden="true"></div>

    <!-- MAIN HEADER -->
    <header id="mainHeader" class="topbar safe top-safe">
      <div class="topbar-inner">
        <div class="topbar-left">
          <span class="nav-item">поиск</span>
          <a class="nav-item" href="https://t.me/furuyumemngrs" target="_blank" rel="noopener">поддержка</a>
        </div>

        <button class="brand" id="logoBtn" aria-label="FURUYUME — наверх">
          <img src="logo.png" alt="FURUYUME">
        </button>

        <div class="topbar-right">
          <span class="nav-item">отзывы</span>
          <span class="nav-item">корзина</span>
        </div>
      </div>
    </header>

    <!-- CATEGORIES (STATIC) -->
    <section class="categories safe" aria-label="Категории">
      <div class="cat-wrap" id="catWrap">
        <!-- injected -->
      </div>
    </section>

    <!-- CONTENT -->
    <main class="content safe" aria-label="Товары">
      <section class="products">
        <div id="grid" class="grid" aria-live="polite">
          <!-- injected -->
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer safe bottom-safe">
      <div class="footer-links">
        <a href="https://t.me/" target="_blank" rel="noopener">telegram</a>
        <a href="https://www.tiktok.com/" target="_blank" rel="noopener">tiktok</a>
        <a href="https://www.instagram.com/" target="_blank" rel="noopener">instagram</a>
        <a href="https://example.com/" target="_blank" rel="noopener">site</a>
      </div>
      <div class="footer-legal">
        <a href="https://example.com/privacy" target="_blank" rel="noopener">политика конфиденциальности</a>
        <a href="https://example.com/offer" target="_blank" rel="noopener">договор оферты</a>
      </div>
    </footer>
  </div>

  <script>
    const CATEGORIES = [
      { id: "all", label: "Все" },
      { id: "olymp", label: "Олимпийки" },
      { id: "bombers", label: "Бомберы" },
      { id: "hoodies", label: "Худи" },
      { id: "longsleeves", label: "Лонгсливы" },
      { id: "tees", label: "Футболки" },
      { id: "pants", label: "Штаны" },
      { id: "shoes", label: "Обувь" }
    ];

    // - sweater.png и dolyami.png лежат рядом с index.html
    // ✅ Сделал названия чуть “длиннее”, чтобы визуально карточки были одинаковее.
    const PRODUCTS = [
      { id:"p1", img:"sweater.png", name:"REFLECTIVE SWEATER (BLACK) — ARCHIVE DROP", badge:"РАСПРОДАЖА", price:"7 600 RUB", oldPrice:"11 600 RUB", dolyami:"Долями по 1 900 ₽", categories:["olymp"] },
      { id:"p2", img:"sweater.png", name:"ARCHIVE TRACK JACKET — RARE PIECE",        badge:"LIMITED",     price:"12 900 RUB", oldPrice:"15 900 RUB", dolyami:"Долями по 3 225 ₽", categories:["olymp"] },
      { id:"p3", img:"sweater.png", name:"BOMBER (VINTAGE) — EARLY 2000s",            badge:"РАСПРОДАЖА",  price:"9 900 RUB",  oldPrice:"13 900 RUB", dolyami:"Долями по 2 475 ₽", categories:["bombers"] },
      { id:"p4", img:"sweater.png", name:"HOODIE (ARCHIVE) — SOFT WASHED",            badge:"DROP",        price:"8 500 RUB",  oldPrice:"10 900 RUB", dolyami:"Долями по 2 125 ₽", categories:["hoodies"] },
      { id:"p5", img:"sweater.png", name:"LONGSLEEVE (RARE) — GRAPHIC EDITION",       badge:"РАСПРОДАЖА",  price:"5 400 RUB",  oldPrice:"7 900 RUB",  dolyami:"Долями по 1 350 ₽", categories:["longsleeves"] },
      { id:"p6", img:"sweater.png", name:"PANTS (ARCHIVE) — STRAIGHT FIT",            badge:"NEW",         price:"6 800 RUB",  oldPrice:"8 900 RUB",  dolyami:"Долями по 1 700 ₽", categories:["pants"] }
    ];

    const loader = document.getElementById("loader");
    const loaderHint = document.getElementById("loaderHint");
    const mainHeader = document.getElementById("mainHeader");
    const floatbar = document.getElementById("floatbar");
    const logoBtn = document.getElementById("logoBtn");
    const floatLogoBtn = document.getElementById("floatLogoBtn");
    const catWrap = document.getElementById("catWrap");
    const grid = document.getElementById("grid");

    const sleep = (ms) => new Promise(r => setTimeout(r, ms));

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function renderCategories(activeId) {
      catWrap.innerHTML = CATEGORIES.map(c => {
        const active = c.id === activeId ? "active" : "";
        return `<button class="cat ${active}" data-cat="${c.id}" type="button">${c.label}</button>`;
      }).join("");
    }

    function filterProducts(catId) {
      if (catId === "all") return PRODUCTS;
      return PRODUCTS.filter(p => (p.categories || []).includes(catId));
    }

    function renderProducts(catId) {
      const items = filterProducts(catId);
      grid.innerHTML = items.map(p => `
        <article class="card">
          <div class="img">
            <img class="product-photo" src="${p.img}" alt="${p.name}">
          </div>
          <div class="name">${p.name}</div>
          <div class="desc">${p.badge}</div>
          <div class="price-row">
            <span>${p.price}</span>
            <span class="old">${p.oldPrice}</span>
          </div>
          <div class="dolyami" aria-label="${p.dolyami}">
            <img class="dolyami-icon" src="dolyami.png" alt="" aria-hidden="true">
            <span>${p.dolyami}</span>
          </div>
        </article>
      `).join("");
    }

    async function switchCategory(nextId) {
      grid.classList.add("fade-out");
      await sleep(160);
      renderProducts(nextId);
      await sleep(20);
      grid.classList.remove("fade-out");
    }

    function setupFloatingHeader() {
      const io = new IntersectionObserver((entries) => {
        const e = entries[0];
        if (!e) return;
        const show = !e.isIntersecting;
        floatbar.classList.toggle("show", show);
        floatbar.setAttribute("aria-hidden", show ? "false" : "true");
      }, { threshold: 0.1 });

      io.observe(mainHeader);
    }

    async function hideLoaderSoon() {
      const hintTimer = setTimeout(() => loaderHint.classList.add("show"), 2200);

      try { if (document.fonts && document.fonts.ready) await Promise.race([document.fonts.ready, sleep(700)]); } catch(e){}
      await sleep(420);

      clearTimeout(hintTimer);
      loader.classList.add("hide");
      await sleep(300);
      loader.style.display = "none";
    }

    (function init(){
      const DEFAULT_CAT = "all";
      renderCategories(DEFAULT_CAT);
      renderProducts(DEFAULT_CAT);

      setupFloatingHeader();

      logoBtn.addEventListener("click", scrollToTop);
      floatLogoBtn.addEventListener("click", scrollToTop);

      catWrap.addEventListener("click", async (e) => {
        const btn = e.target.closest("[data-cat]");
        if (!btn) return;
        const nextId = btn.getAttribute("data-cat");
        const current = catWrap.querySelector(".cat.active")?.getAttribute("data-cat");
        if (nextId === current) return;

        catWrap.querySelectorAll(".cat").forEach(x => x.classList.remove("active"));
        btn.classList.add("active");

        await switchCategory(nextId);
      });

      // Disable double-tap zoom feeling a bit
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function (event) {
        const now = Date.now();
        if (now - lastTouchEnd <= 250) event.preventDefault();
        lastTouchEnd = now;
      }, { passive: false });

      if (document.readyState === "complete" || document.readyState === "interactive") {
        hideLoaderSoon();
      } else {
        document.addEventListener("DOMContentLoaded", hideLoaderSoon, { once: true });
      }
    })();
  </script>
</body>
</html>
